# Components - Agent Quick Reference

**Folder:** `frontend/src/components/`
**Purpose:** Reusable React components - Layout, ErrorBoundary, CommandCenter, etc.
**Layer:** UI

## Quick Rules

✅ **Can Do:**
- Create new React components
- Add TypeScript types
- Use React Query hooks for data
- Add co-located CSS files
- Create reusable components

❌ **Cannot Do:**
- Break existing component patterns without justification
- Create new abstractions before checking existing patterns
- Skip TypeScript types
- Use non-functional components
- Break component API contracts

⚠️ **Requires HITL:**
- Breaking component API changes
- Security-related changes

## Patterns

**Component:**
```typescript
export const Component: React.FC<ComponentProps> = () => {
  const { data } = useQuery(...);
  return <div>...</div>;
};
```

**With CSS:**
```typescript
// Component.tsx
import './Component.css';

export const Component: React.FC = () => {
  // ...
};
```

## Boundaries

**Can Import From:**
- ✅ `frontend/src/api`
- ✅ `frontend/src/contexts`

**Cannot Import From:**
- ❌ `backend/` (use API clients instead)

**Used By:**
- `frontend/src/pages`

## Test Patterns

**Component Test:**
```typescript
import { render, screen } from '@testing-library/react';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { Component } from './Component';

const queryClient = new QueryClient({
  defaultOptions: { queries: { retry: false } },
});

const wrapper = ({ children }: { children: React.ReactNode }) => (
  <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
);

describe('Component', () => {
  it('renders correctly', () => {
    render(<Component />, { wrapper });
    expect(screen.getByText('Expected Text')).toBeInTheDocument();
  });

  it('handles user interaction', async () => {
    const { user } = render(<Component />, { wrapper });
    await user.click(screen.getByRole('button'));
    expect(screen.getByText('Updated Text')).toBeInTheDocument();
  });
});
```

**Hook Test:**
```typescript
import { renderHook, waitFor } from '@testing-library/react';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { useCustomHook } from './useCustomHook';

const queryClient = new QueryClient({
  defaultOptions: { queries: { retry: false } },
});

const wrapper = ({ children }: { children: React.ReactNode }) => (
  <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
);

describe('useCustomHook', () => {
  it('fetches data correctly', async () => {
    const { result } = renderHook(() => useCustomHook(), { wrapper });
    await waitFor(() => expect(result.current.isSuccess).toBe(true));
    expect(result.current.data).toBeDefined();
  });
});
```

**Coverage Requirements:**
- Minimum 70% coverage for new components
- All user interactions must be tested
- React Query hooks must be tested
- Error states must be tested

## Common Tasks

**Add New Component:**
1. Create `Component.tsx` in `frontend/src/components/`
2. Create `Component.css` (co-located)
3. Add TypeScript types
4. Use functional component pattern
5. Add tests in `frontend/tests/components/Component.test.tsx`
6. Run: `npm test Component.test.tsx`
7. Verify coverage: `npm test -- --coverage`

## Links

- Full guide: `frontend/FRONTEND.md`
- Policy: `.repo/policy/BESTPR.md`
- JSON context: `.agent-context.json`

---

**Note:** Always use functional components with TypeScript. Check existing patterns first.
