# API Clients - Agent Quick Reference

**Folder:** `frontend/src/api/`
**Purpose:** API client functions organized by domain - uses TanStack React Query
**Layer:** UI

## Quick Rules

✅ **Can Do:**
- Create API client functions
- Add React Query hooks (`useQuery`, `useMutation`)
- Organize by domain (clients, crm, finance, etc.)
- Add TypeScript types

❌ **Cannot Do:**
- Use non-React Query patterns for data fetching
- Break TypeScript types
- Create direct fetch calls (use API client)
- Skip error handling

⚠️ **Requires HITL:**
- Breaking API contract changes
- Security-related changes

## Patterns

**Query Hook:**
```typescript
export const useClients = () => {
  return useQuery({
    queryKey: ['clients'],
    queryFn: () => apiClient.get('/api/clients/')
  });
};
```

**Mutation Hook:**
```typescript
export const useCreateClient = () => {
  return useMutation({
    mutationFn: (data) => apiClient.post('/api/clients/', data)
  });
};
```

## Boundaries

**Can Import From:**
- ✅ `backend/` (for API contracts)

**Cannot Import From:**
- ❌ Direct imports from backend code

**Used By:**
- `frontend/src/pages`
- `frontend/src/components`

## Common Tasks

**Add New API Client Function:**
1. Add function to appropriate domain file (e.g., `clients.ts`)
2. Use `useQuery` or `useMutation` from React Query
3. Add TypeScript types
4. Add error handling
5. Add tests in `__tests__/`

## Links

- Full guide: `frontend/FRONTEND.md`
- Policy: `.repo/policy/BESTPR.md`
- JSON context: `.agent-context.json`

---

**Note:** Always use React Query for data fetching. Never use direct fetch calls.
